(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{683:function(e,t,r){"use strict";r(44),r(28);var n=r(8),o=r(16);var d=function(e,t,r){var n=new FormData;return function e(data,t){if(!function(e){return Array.isArray(r)&&r.some((function(t){return t===e}))}(t))if(t=t||"",data instanceof File)n.append(t,data);else if(Array.isArray(data))for(var i=0;i<data.length;i++)n.append(t,data[i]);else if("object"===Object(o.a)(data)&&data)for(var d in data)data.hasOwnProperty(d)&&e(data[d],""===t?d:t+"."+d);else null!=data&&n.append(t,data)}(e,t),n};t.a={data:function(){return{loading:{data:!1,add:!1,edit:!1,delete:!1},alert:{show:!1,type:"success",text:"",timeout:5e3}}},methods:{fetchItem:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.fetchData.url,n=r.replace(":param",e.fetchData.param),t.prev=2,e.loading.data=!0,t.next=6,e.$axios.get(n);case 6:o=t.sent,e.loading.data=!1,e.item=o.data[e.fetchData.data],t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),e.loading.data=!1;case 14:case"end":return t.stop()}}),t,null,[[2,11]])})))()},fetchItems:function(){var e=arguments,t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.length>0&&void 0!==e[0]&&e[0],r.prev=1,n&&(t.data=[]),t.loading.data=!0,r.next=6,t.$axios.get(t.fetchData.url);case 6:o=r.sent,t.loading.data=!1,t.data=o.data[t.fetchData.data],r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),t.loading.data=!1;case 14:case"end":return r.stop()}}),r,null,[[1,11]])})))()},addItem:function(data,form,e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.removeAlert(),t.loading.add=!0,t.addData.formData&&(data=d(data)),e.next=6,t.$axios.post(t.addData.url,data);case 6:if(r=e.sent,t.loading.add=!1,form.resetValidation(),t.showAddEditDialog=!1,t.addAlert(!0,"success",r.data.message?r.data.message:r.message),t.$emit("after-add",r,t.item),!t.addData.reload){e.next=16;break}if(!r){e.next=16;break}return e.next=16,t.fetchItems();case 16:t.addData.successRedirect&&t.$router.push(t.addData.successRedirect),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),t.loading.add=!1,t.addAlert(!0,"error",e.t0.response.data.message?e.t0.response.data.message:e.t0.response.message);case 23:t.addData.errorRedirect&&t.$router.push(t.addData.errorRedirect);case 24:case"end":return e.stop()}}),e,null,[[0,19]])})))()},editItem:function(data,form){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.editData.url,n=r,e.editData.param&&(n=r.replace(":param",e.item[e.editData.param])),t.prev=3,e.removeAlert(),e.loading.edit=!0,e.editData.formData&&(data=d(data)),t.next=9,e.$axios.put(n,data);case 9:if(o=t.sent,e.loading.edit=!1,form.resetValidation(),e.showAddEditDialog=!1,e.addAlert(!0,"success",o.data.message?o.data.message:o.message),!e.editData.reload){t.next=18;break}if(!o){t.next=18;break}return t.next=18,e.fetchItems();case 18:e.$emit("after-edit",o,e.item),e.editData.successRedirect&&e.$router.push(e.editData.successRedirect),t.next=27;break;case 22:t.prev=22,t.t0=t.catch(3),e.loading.edit=!1,e.addAlert(!0,"error",t.t0.response.data.message?t.t0.response.data.message:t.t0.response.message),e.editData.errorRedirect&&e.$router.push(e.editData.errorRedirect);case 27:case"end":return t.stop()}}),t,null,[[3,22]])})))()},deleteItem:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.deleteData.url,n=r.replace(":param",e.itemToDel[e.deleteData.param]),t.prev=2,e.removeAlert(),e.loading.delete=!0,t.next=7,e.$axios.delete(n);case 7:if(o=t.sent,e.loading.delete=!1,e.addAlert(!0,"success",o.data.message?o.data.message:o.message),e.showDeleteDialog=!1,e.$emit("after-delete",o,e.item),!e.deleteData.reload){t.next=16;break}if(!o){t.next=16;break}return t.next=16,e.fetchItems();case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(2),e.loading.delete=!1,e.addAlert(!0,"error",t.t0.response.data.message?t.t0.response.data.message:t.t0.response.message);case 22:case"end":return t.stop()}}),t,null,[[2,18]])})))()},deleteItems:function(data){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.removeAlert(),e.loading.delete=!0,e.deleteMultipleData.arrayOf&&(data=data.map((function(t){return t[e.deleteMultipleData.arrayOf]}))),t.next=6,e.$axios.post(e.deleteMultipleData.url,data);case 6:if(r=t.sent,e.loading.delete=!1,e.addAlert(!0,"success",r.data.message?r.data.message:r.message),e.showDeleteDialog=!1,e.$emit("after-delete-multiple",r,e.item),!e.deleteMultipleData.reload){t.next=15;break}if(!r){t.next=15;break}return t.next=15,e.fetchItems();case 15:e.bulkDeleteValue="",t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),e.loading.delete=!1,e.addAlert(!0,"error",t.t0.response.data.message?t.t0.response.data.message:t.t0.response.message);case 22:case"end":return t.stop()}}),t,null,[[0,18]])})))()},addAlert:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",text=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;this.alert={show:e,type:t,text:text,timeout:r}},removeAlert:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",text=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;this.alert={show:e,type:t,text:text,timeout:r}}}}},712:function(e,t,r){var content=r(749);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(19).default)("0e0763ea",content,!0,{sourceMap:!1})},748:function(e,t,r){"use strict";var n=r(712);r.n(n).a},749:function(e,t,r){(t=r(18)(!1)).push([e.i,"p[data-v-9b8a5d78]{margin:0;padding:0}",""]),e.exports=t},845:function(e,t,r){"use strict";r.r(t);r(15),r(12),r(10),r(9),r(11);var n=r(1),o=r(68);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var l={middleware:["pagePermission"],components:{CrudDataTable:function(){return Promise.all([r.e(0),r.e(1),r.e(85)]).then(r.bind(null,702))},EditProfileForm:function(){return Promise.all([r.e(0),r.e(78)]).then(r.bind(null,878))},EditRoleForm:function(){return Promise.all([r.e(0),r.e(96)]).then(r.bind(null,879))},EditProfilePictureForm:function(){return r.e(95).then(r.bind(null,880))},EditCredentialsForm:function(){return r.e(94).then(r.bind(null,881))}},mixins:[r(683).a],data:function(){return{}},computed:c({},Object(o.d)({user:function(e){return e.user.user}})),watch:{$route:function(){this.$auth.user._id===this.$route.params.id?this.$store.commit("user/SET_USER",this.$auth.user):this.setUser({auth:this.$auth,axios:this.$axios,userId:this.$route.params.id})}},mounted:function(){this.$auth.user._id===this.$route.params.id?this.$store.commit("user/SET_USER",this.$auth.user):this.setUser({auth:this.$auth,axios:this.$axios,userId:this.$route.params.id})},methods:c(c({},Object(o.b)("user",["updateUser","setUser"])),{},{editUser:function(e){this.updateUser({user:e.data.user,auth:this.$auth})}})},m=(r(748),r(37)),f=r(46),v=r.n(f),h=r(103),x=r(428),_=r(680),D=r(109),y=r(148),w=r(180),$=r(426),k=r(675),component=Object(m.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-row",[r("v-col",[r("v-card",[r("v-row",{staticClass:"py-5",attrs:{justify:"center",align:"center"}},[r("v-col",{staticClass:"mx-auto",attrs:{cols:"10"}},[e.$store.state.loading.user.profile||e.$store.state.loading.user.user?r("v-skeleton-loader",{attrs:{type:"card-avatar, article, card-actions"}}):r("v-row",{staticClass:"justify-center jsutify-sm-start align-center"},[r("v-col",{staticClass:"text-center",attrs:{cols:"12",md:"6"}},[e.user?r("v-img",{attrs:{src:e.user.avatar?"/uploads/users/"+e.user.avatar+"?"+Date.now():"/potrait.jpg","aspect-ratio":"1"},scopedSlots:e._u([{key:"placeholder",fn:function(){return[r("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)]},proxy:!0}],null,!1,3042438443)},[e._v(" "),e.user&&e.$auth.user._id===e.user._id?r("div",{staticStyle:{position:"absolute",top:"10px",right:"10px",cursor:"pointer","z-index":"10000"}},[r("crud-data-table",{attrs:{"default-item":e.user,button:{color:"primary",text:" ",icon:"mdi-camera",type:"icon",iconSize:"50px",iconColor:"primary"},status:"edit","add-edit-dialog":{editHeading:e.$t("addEditDialog.headings.edit.profile.image")},"edit-data":{url:"/api/users/:param",param:"_id",formData:!0}},on:{"after-edit":e.editUser},scopedSlots:e._u([{key:"crud-form",fn:function(e){var t=e.item;return[r("edit-profile-picture-form",{attrs:{user:t}})]}}],null,!1,1878730283)})],1):e._e()]):e._e()],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"6"}},[r("div",{staticClass:"d-flex my-2 align-center"},[r("v-icon",{staticClass:"mr-3"},[e._v("mdi-account")]),e._v(" "),e.user&&e.user.name?r("h3",[e._v(e._s(e.user.name))]):e._e()],1),e._v(" "),r("div",{staticClass:"d-flex my-2 align-center"},[r("v-icon",{staticClass:"mr-3"},[e._v("mdi-email")]),e._v(" "),e.user&&e.user.email?r("p",[e._v(e._s(e.user.email))]):e._e()],1),e._v(" "),r("div",{staticClass:"d-flex my-2 align-center"},[r("v-icon",{staticClass:"mr-3"},[e._v("mdi-newspaper")]),e._v(" "),e.user&&e.user.role?r("p",[e._v(e._s(e.user.role.title))]):e._e()],1),e._v(" "),r("div",{staticClass:"d-flex my-2 align-center"},[r("v-icon",{staticClass:"mr-3"},[e._v("mdi-account")]),e._v(" "),e.user&&e.user.gender?r("p",[e._v(e._s(e.user.gender))]):e._e()],1),e._v(" "),r("div",{staticClass:"d-flex my-2 align-center"},[r("v-icon",{staticClass:"mr-3"},[e._v("mdi-comment")]),e._v(" "),e.user&&e.user.bio?r("p",[e._v(e._s(e.user.bio))]):e._e()],1)])],1)],1),e._v(" "),r("v-col",{staticClass:"mx-auto mt-8",attrs:{cols:"10"}},[r("div",{staticClass:"d-flex flex-wrap justify-space-around align-center"},[e.user&&e.$auth.user._id===e.user._id?r("div",[r("crud-data-table",{attrs:{"default-item":e.user,button:{text:"Edit Profile",icon:"mdi-pencil"},status:"edit","add-edit-dialog":{editHeading:e.$t("addEditDialog.headings.edit.profile.profile")},"edit-data":{url:"/api/users/:param",param:"_id"}},on:{"after-edit":e.editUser},scopedSlots:e._u([{key:"crud-form",fn:function(e){var t=e.item;return[r("edit-profile-form",{attrs:{user:t}})]}}],null,!1,3867709925)})],1):e._e(),e._v(" "),e.user&&"admin"===e.$auth.user.role.title?r("div",[r("crud-data-table",{attrs:{"default-item":e.user,button:{color:"secondary",text:" Change Role",icon:"mdi-account"},status:"edit","add-edit-dialog":{editHeading:e.$t("addEditDialog.headings.edit.profile.role")},"edit-data":{url:"/api/users/:param",param:"_id"}},on:{"after-edit":e.editUser},scopedSlots:e._u([{key:"crud-form",fn:function(e){var t=e.item;return[r("edit-role-form",{attrs:{user:t}})]}}],null,!1,1697764602)})],1):e._e(),e._v(" "),e.user&&e.$auth.user._id===e.user._id?r("div",[r("crud-data-table",{attrs:{"default-item":e.user,button:{color:"error",text:"Edit Credentials",icon:"mdi-lock"},status:"edit","add-edit-dialog":{editHeading:e.$t("addEditDialog.headings.edit.profile.credentials")},"edit-data":{url:"/api/users/:param",param:"_id"}},on:{"after-edit":e.editUser},scopedSlots:e._u([{key:"crud-form",fn:function(e){var t=e.item;return[r("edit-credentials-form",{attrs:{user:t}})]}}],null,!1,1064898198)})],1):e._e()])])],1)],1)],1)],1)],1)}),[],!1,null,"9b8a5d78",null);t.default=component.exports;v()(component,{VCard:h.a,VCol:x.a,VContainer:_.a,VIcon:D.a,VImg:y.a,VProgressCircular:w.a,VRow:$.a,VSkeletonLoader:k.a})}}]);